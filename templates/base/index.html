{% load static %}

<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="max-age=604800" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>GreatKart | One of the Biggest Online Shopping Platform</title>

<link href="{% static 'images/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">

<!-- jQuery -->
<script src="{% static 'js/jquery-2.0.0.min.js' %}" type="text/javascript"></script>

<!-- Bootstrap4 files-->
<script src="{% static 'js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>
<link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css"/>

<!-- Font awesome 5 -->
<link href="{% static 'fonts/fontawesome/css/all.min.css' %}" type="text/css" rel="stylesheet">

<!-- custom style -->
<link href="{% static 'css/ui.css' %}" rel="stylesheet" type="text/css"/>
<link href="{% static 'css/responsive.css' %}" rel="stylesheet" media="only screen and (max-width: 1200px)" />
<link href="{% static 'orders/drop_down.css' %}" rel="stylesheet" type="text/css"/>
<link href="{% static 'menus/slider.css' %}" rel="stylesheet" type="text/css"/>
<!-- custom javascript -->
<script src="{% static 'js/script.js' %}" type="text/javascript"></script>

<script type="text/javascript">



/// some script

// jquery ready start
$(document).ready(function() {
	// jQuery code

}); 
// jquery end
</script>

</head>
<body>


<header class="section-header">
<nav class="navbar p-md-0 navbar-expand-sm navbar-light border-bottom">
<div class="container">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTop4" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarTop4">
    <ul class="navbar-nav mr-auto">
    	<li class="nav-item dropdown">
		 	<a href="#" class="nav-link">   English </a>
		    
		</li>
		<li class="nav-item dropdown">
			<a href="#" class="nav-link"> USD </a>
		</li>
    </ul>
    <ul class="navbar-nav">
		<li><a href="#" class="nav-link"> <i class="fa fa-envelope"></i> Email </a></li>
		<li><a href="#" class="nav-link"> <i class="fa fa-phone"></i> Call us </a></li>
	</ul> <!-- list-inline //  -->
  </div> <!-- navbar-collapse .// -->
</div> <!-- container //  -->
</nav>

<section class="header-main border-bottom">
	<div class="container">
<div class="row align-items-center">
	<div class="col-lg-2 col-md-3 col-6">
		<a href="/" class="brand-wrap">
			<img class="logo" src="/">Home
		</a> <!-- brand-wrap.// -->
	</div>
	<div class="col-lg col-sm col-md col-6 flex-grow-0">
		<div class="category-wrap dropdown d-inline-block float-right">
			<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> 
				<i class="fa fa-bars"></i> All category 
			</button>
			<div class="dropdown-menu">
                {% for category in request.session.categories %}
				<a class="dropdown-item" href="/products/?category={{category}}">{{category}} </a>
				{% endfor %}
              
			</div>
		</div>  <!-- category-wrap.// -->
	</div> <!-- col.// -->
	<a href="/products" class="btn btn-outline-primary">Store</a>
	<div class="col-lg  col-md-6 col-sm-12 col">
		<form action="#" class="search">
			<div class="input-group w-100 search_container">
			    <input  type="text" class="form-control prod_search" style="width:60%;" placeholder="Search">
			    
			    <div class="input-group-append">
			      <button class="btn btn-primary" type="submit">
			        <i class="fa fa-search"></i>
			      </button>
			    </div>
				<div class="results">
					<ul class="list">Search results</ul>
				</div>
		    </div>
		</form> <!-- search-wrap .end// -->
	</div> <!-- col.// -->
	<div class="col-lg-3 col-sm-6 col-8 order-2 order-lg-3">
				<div class="d-flex justify-content-end mb-3 mb-lg-0">
					<div class="widget-header">
						{% if request.user.is_authenticated %}
						<a href="/dashboard/"><small class="title text-muted">{{request.user.username}}</small></a>
						<div> 
							<a href="{% url 'customers:log_out' %}">Log out</a> <span class="dark-transp"> | </span>
						</div>
						{% else %}
						<small class="title text-muted">Welcome guest!</small>
						
						<div> 
							<a href="{% url 'customers:login_user' %}">Sign in</a> <span class="dark-transp"> | </span>
							<a href="{% url 'customers:signup' %}"> Register</a>
						</div>
						{% endif %}
					</div>
					<a href="{% url 'orders:view_cart' %}" class="widget-header pl-3 ml-3">
						<div class="icon icon-sm rounded-circle border"><i class="fa fa-shopping-cart"></i></div>
						<span class="badge badge-pill badge-danger notify">{{request.session.total_count}}</span>
					</a>
				</div> <!-- widgets-wrap.// -->
			</div> <!-- col.// -->
</div> <!-- row.// -->
	</div> <!-- container.// -->
</section> <!-- header-main .// -->




</header> <!-- section-header.// -->


<!-- ========================= SECTION MAIN ========================= -->
<section class="section-intro padding-y-sm">
<div class="container">

<div class="intro-banner-wrap">
	<img src="" class="img-fluid rounded">
</div>

</div> <!-- container //  -->
</section>
<!-- ========================= SECTION MAIN END// ========================= -->

<!-- ========================= SECTION  ========================= -->
<section class="section-name padding-y-sm">
<div class="container">

{% block content %}

<header class="section-heading">
	<a href="./store.html" class="btn btn-outline-primary float-right">See all</a>
	<h3 class="section-title">Popular ones</h3>
</header><!-- sect-heading -->

	
<div class="row">


    {% for item in menu_list %}
	<div class="col-md-3">
		<div class="card card-product-grid">
			<a href="{% url 'menus:item' item.id %}" class="img-wrap"> <img src="{{item.image_url}}"> </a>
			<figcaption class="info-wrap">
				<a href="{% url 'menus:item' item.id %}" class="title">{{item.item_name}}</a>
				<div class="price mt-1">{{item.price}}</div> <!-- price-wrap.// -->
			</figcaption>
		</div>
	</div> <!-- col.// -->

    {%  endfor %}

	
</div> <!-- row.// -->

<div class="row">
<div class="col--md-12">
	<div class="container-fluid">
		<h3 class="section-title"> Tasy Treat</h3>
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
		  <div class="carousel-inner row w-100 mx-auto">

			<div class="carousel-item col-md-4 active">
				<div class="card">
				  <div class="card-body">
					<h4 class="card-title">Card 1</h4>
					<p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is
					  a little bit longer.</p>
					<p class="card-text">
					  <small class="text-muted">Last updated 3 mins ago</small>
					</p>
				  </div>
				</div>
			  </div>
			  <div class="carousel-item col-md-4">
				<div class="card">
				  <div class="card-body">
					<h4 class="card-title">Card 2</h4>
					<p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is
					  a little bit longer.</p>
					<p class="card-text">
					  <small class="text-muted">Last updated 3 mins ago</small>
					</p>
				  </div>
				</div>
			  </div>
			  <div class="carousel-item col-md-4">
				<div class="card">
				  <div class="card-body">
					<h4 class="card-title">Card 3</h4>
					<p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is
					  a little bit longer.</p>
					<p class="card-text">
					  <small class="text-muted">Last updated 3 mins ago</small>
					</p>
				  </div>
				</div>
			  </div>
			  <div class="carousel-item col-md-4">
				<div class="card">
				  <div class="card-body">
					<h4 class="card-title">Card 4</h4>
					<p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is
					  a little bit longer.</p>
					<p class="card-text">
					  <small class="text-muted">Last updated 3 mins ago</small>
					</p>
				  </div>
				</div>
			  </div>
			  <div class="carousel-item col-md-4">
				<div class="card">
				  <div class="card-body">
					<h4 class="card-title">Card 5</h4>
					<p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is
					  a little bit longer.</p>
					<p class="card-text">
					  <small class="text-muted">Last updated 3 mins ago</small>
					</p>
				  </div>
				</div>
			  </div>
			  <div class="carousel-item col-md-4">
				<div class="card">
				  <div class="card-body">
					<h4 class="card-title">Card 6</h4>
					<p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is
					  a little bit longer.</p>
					<p class="card-text">
					  <small class="text-muted">Last updated 3 mins ago</small>
					</p>
				  </div>
				</div>
			  </div>
	
		  </div>
		  <div class="container">
			<div class="row">
			  <div class="col-12 text-center mt-4">
				<a class="btn btn-outline-secondary mx-1 prev" href="javascript:void(0)" title="Previous">
				  <i class="fa fa-lg fa-chevron-left"></i>
				</a>
				<a class="btn btn-outline-secondary mx-1 next" href="javascript:void(0)" title="Next">
				  <i class="fa fa-lg fa-chevron-right"></i>
				</a>
			  </div>
			</div>
		  </div>
		</div>
	  </div>


</div>

</div>

{% endblock %}
</div><!-- container // -->
</section>
<!-- ========================= SECTION  END// ========================= -->




<!-- ========================= FOOTER ========================= -->
<footer class="section-footer border-top">
	<div class="container">
		<section class="footer-bottom border-top row">
			<div class="col-md-2">
				<p class="text-muted"> &copy 2019 Company name </p>
			</div>
			<div class="col-md-8 text-md-center">
				<span  class="px-2">info@pixsellz.io</span>
				<span  class="px-2">+879-332-9375</span>
				<span  class="px-2">Street name 123, Avanue abc</span>
			</div>
			<div class="col-md-2 text-md-right text-muted">
				<i class="fab fa-lg fa-cc-visa"></i>
				<i class="fab fa-lg fa-cc-paypal"></i>
				<i class="fab fa-lg fa-cc-mastercard"></i>
			</div>
		</section>
	</div><!-- //container -->
</footer>
<!-- ========================= FOOTER END // ========================= -->
<script>

(function ($) {
  "use strict";
  // Auto-scroll
  $('#myCarousel').carousel({
    interval: 5000
  });

  // Control buttons
  $('.next').click(function () {
    $('.carousel').carousel('next');
    return false;
  });
  $('.prev').click(function () {
    $('.carousel').carousel('prev');
    return false;
  });

  // On carousel scroll
  $("#myCarousel").on("slide.bs.carousel", function (e) {
    var $e = $(e.relatedTarget);
    var idx = $e.index();
    var itemsPerSlide = 3;
    var totalItems = $(".carousel-item").length;
    if (idx >= totalItems - (itemsPerSlide - 1)) {
      var it = itemsPerSlide -
          (totalItems - idx);
      for (var i = 0; i < it; i++) {
        // append slides to end 
        if (e.direction == "left") {
          $(
            ".carousel-item").eq(i).appendTo(".carousel-inner");
        } else {
          $(".carousel-item").eq(0).appendTo(".carousel-inner");
        }
      }
    }
  });
})
(jQuery);
</script>

<script>

// let user = '{{request.user}}';
// console.log(user)
$('document').ready(function(){


	search_bar = document.querySelector('.results')
	list = document.querySelector('.list')
	let url_ =''

	let attach_children =(ul,val,id)=>{
		
		li = document.createElement('li');
		li.setAttribute('id','item_page');
		anch = document.createElement('a');
		li.innerHTML = val;
		url_ = document.location.origin+'/item/'+id
		anch.setAttribute('href',url_);
		anch.setAttribute('class','item-link');
		anch.appendChild(li);
		ul.appendChild(anch);

	}
	
	$('.prod_search').on('keyup',function(){
		val = document.querySelector('.prod_search').value
		console.log(val)
		
		$.ajax({
			url:'/product_search/',
			method :'GET',
			dataType:'json',
			contentType:'application/json',
			data : {
				'val':val
			},			
			success:function(data){
				
				// console.log(data.data)
				list.innerHTML = ""
				
				arr = data.data;
				
				arr.forEach(element => {
					search_bar.style.visibility ='visible'
					attach_children(list,element[1],element[0])
			
				});
				
			},
			error:function(error){
				console.log(error)
			}
		})
	})

	
})

	document.querySelector('.search_container').addEventListener('click',function(e){
		

		
		// list.remove();
		
	})

</script>
</body>
</html>